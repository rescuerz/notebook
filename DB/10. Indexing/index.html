
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="rescuerz's notebook">
      
      
      
      
        <link rel="prev" href="../9.%20Data%20Storage%20Structures/">
      
      
        <link rel="next" href="../11.%20Query%20Processing/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>10. Indexing - rescuerz's notebook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeline.css">
    
      <link rel="stylesheet" href="../../supports/css/base.css">
    
      <link rel="stylesheet" href="../../supports/css/theme.css">
    
      <link rel="stylesheet" href="../../supports/css/admonitions.css">
    
      <link rel="stylesheet" href="https://jsd.cdn.zzko.cn/npm/katex@0.16.4/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#10-indexing" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="rescuerz&#39;s notebook" class="md-header__button md-logo" aria-label="rescuerz's notebook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            rescuerz's notebook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              10. Indexing
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/rescuerz/notebook" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    rescuerz/notebook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ADS/" class="md-tabs__link">
          
  
    
  
  Computer Science

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  System

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../CV/" class="md-tabs__link">
          
  
    
  
  Artificial Intelligence

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="rescuerz&#39;s notebook" class="md-nav__button md-logo" aria-label="rescuerz's notebook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    rescuerz's notebook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rescuerz/notebook" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    rescuerz/notebook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    更新记录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    友链
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Computer Science
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ADS/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/1.%20AVL_tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. AVL Tree &amp; Splay Tree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/2.%20Red%20Black%20Tree%20%26%20B%2B%20Tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Red Black Tree &amp; B+ Tree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/3.%20Inverted%20File%20Index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Inverted File Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/4.%20Leftist%20Heaps%20and%20Skew%20Heaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Leftist Heap &amp; Skew Heap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/5.%20Binomial%20Queue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Binomial Queue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/6.%20backtracking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Backtracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/7.%20Divide%20%26%20Conquer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Divide &amp; Conquer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/8.%20Dynamic%20Programming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/9.%20Greedy%20Algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Greedy Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/10.%20NP-Completeness/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. NP-Completeness
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/11.%20Approximation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. Approximation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/12.%20Local%20Search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12. Local Search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/13.%20Randomized%20Algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13. Randomized Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/14.%20Parallel%20Algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14. Parallel Algorithm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/15.%20External%20Sorting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15. External Sorting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    System
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    数据库系统
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            数据库系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.%20Relational%20Model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Relational Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.%20SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.%20Entity-Relationship%20Model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Entity-Relationship Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7.%20Relational%20Database%20Design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Relational Database Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8.%20Physical%20Storage%20Systems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Physical Storage Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.%20Data%20Storage%20Structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Data Storage Structures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    10. Indexing
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    10. Indexing
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#101-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      10.1 Basic Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.1 Basic Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1011-index-evaluation-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      10.1.1 Index Evaluation Metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#102-ordered-indices" class="md-nav__link">
    <span class="md-ellipsis">
      10.2 Ordered Indices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#103-b-tree-index" class="md-nav__link">
    <span class="md-ellipsis">
      10.3 B+-Tree Index
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.3 B+-Tree Index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1031-observations-about-b-trees" class="md-nav__link">
    <span class="md-ellipsis">
      10.3.1 Observations about B+-trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1032-find--insert--delete" class="md-nav__link">
    <span class="md-ellipsis">
      10.3.2 Find &amp; Insert &amp; Delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1033-b--tree--height-and-size-estimation" class="md-nav__link">
    <span class="md-ellipsis">
      10.3.3 B+- tree : height and size estimation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#104-b-tree-file-organization" class="md-nav__link">
    <span class="md-ellipsis">
      10.4 B+-Tree File Organization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.4 B+-Tree File Organization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1041-other-issues-in-indexing" class="md-nav__link">
    <span class="md-ellipsis">
      10.4.1 Other Issues in Indexing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#105-bulk-loading-and-bottom-up-build" class="md-nav__link">
    <span class="md-ellipsis">
      10.5 Bulk Loading and Bottom-Up Build
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.5 Bulk Loading and Bottom-Up Build">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1051-bottom-up-build" class="md-nav__link">
    <span class="md-ellipsis">
      10.5.1 Bottom-Up Build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1052-bulk-insert-index-entries" class="md-nav__link">
    <span class="md-ellipsis">
      10.5.2 Bulk insert index entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#106-multiple-key-access" class="md-nav__link">
    <span class="md-ellipsis">
      10.6 Multiple-Key Access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.6 Multiple-Key Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1061-indices-on-multiple-keys" class="md-nav__link">
    <span class="md-ellipsis">
      10.6.1 Indices on Multiple Keys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#107-indexing-in-main-memory" class="md-nav__link">
    <span class="md-ellipsis">
      10.7 Indexing in Main Memory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#108-indexing-on-flash" class="md-nav__link">
    <span class="md-ellipsis">
      10.8 Indexing on Flash
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.8 Indexing on Flash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1081-log-structured-merge-lsm-tree" class="md-nav__link">
    <span class="md-ellipsis">
      10.8.1 Log Structured Merge (LSM) Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1082-buffer-tree" class="md-nav__link">
    <span class="md-ellipsis">
      10.8.2 Buffer Tree
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#109-bitmap-indices" class="md-nav__link">
    <span class="md-ellipsis">
      10.9 Bitmap Indices
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11.%20Query%20Processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. Query Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12.%20Query%20Optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12. Query Optimization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13.%20Transaction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13. Transactions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14.%20Concurrency%20Control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14. Concurrency Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15.%20Recovery%20System/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15. Recovery System
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../CO/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    计算机组成与设计
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            计算机组成与设计
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CO/1.%20Introduce/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduce
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CO/2.%20Instructions%20Language%20of%20the%20Computer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Instructions: Language of the Computer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CO/3.%20Arithmetic%20for%20Computer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Arithmetic for Computer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CO/4.%20The%20Processor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. The Processor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CO/5.%20Large%20and%20Fast%20Exploiting%20Memory%20Hierarchy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Large and Fast: Exploiting Memory Hierarchy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CO/6.%20Storage%2C%20Networks%20and%20Other%20Peripherals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Storage, Networks and Other Peripherals
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Artificial Intelligence
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Artificial Intelligence
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../CV/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Computer Vision
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Computer Vision
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture1_Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture2_Image_Classification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image_Classification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture3_Linear_Classifiers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linear_Classifier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture4_Optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture5_Neural_Networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neural Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture6_Backpropagation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backpropagation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture7_ConvolutionalNetworks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convolutional Neural Networks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture8_CNN_Architectures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CNN Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture9_Hardware_and_Software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware and Software
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#101-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      10.1 Basic Concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.1 Basic Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1011-index-evaluation-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      10.1.1 Index Evaluation Metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#102-ordered-indices" class="md-nav__link">
    <span class="md-ellipsis">
      10.2 Ordered Indices
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#103-b-tree-index" class="md-nav__link">
    <span class="md-ellipsis">
      10.3 B+-Tree Index
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.3 B+-Tree Index">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1031-observations-about-b-trees" class="md-nav__link">
    <span class="md-ellipsis">
      10.3.1 Observations about B+-trees
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1032-find--insert--delete" class="md-nav__link">
    <span class="md-ellipsis">
      10.3.2 Find &amp; Insert &amp; Delete
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1033-b--tree--height-and-size-estimation" class="md-nav__link">
    <span class="md-ellipsis">
      10.3.3 B+- tree : height and size estimation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#104-b-tree-file-organization" class="md-nav__link">
    <span class="md-ellipsis">
      10.4 B+-Tree File Organization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.4 B+-Tree File Organization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1041-other-issues-in-indexing" class="md-nav__link">
    <span class="md-ellipsis">
      10.4.1 Other Issues in Indexing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#105-bulk-loading-and-bottom-up-build" class="md-nav__link">
    <span class="md-ellipsis">
      10.5 Bulk Loading and Bottom-Up Build
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.5 Bulk Loading and Bottom-Up Build">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1051-bottom-up-build" class="md-nav__link">
    <span class="md-ellipsis">
      10.5.1 Bottom-Up Build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1052-bulk-insert-index-entries" class="md-nav__link">
    <span class="md-ellipsis">
      10.5.2 Bulk insert index entries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#106-multiple-key-access" class="md-nav__link">
    <span class="md-ellipsis">
      10.6 Multiple-Key Access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.6 Multiple-Key Access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1061-indices-on-multiple-keys" class="md-nav__link">
    <span class="md-ellipsis">
      10.6.1 Indices on Multiple Keys
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#107-indexing-in-main-memory" class="md-nav__link">
    <span class="md-ellipsis">
      10.7 Indexing in Main Memory
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#108-indexing-on-flash" class="md-nav__link">
    <span class="md-ellipsis">
      10.8 Indexing on Flash
    </span>
  </a>
  
    <nav class="md-nav" aria-label="10.8 Indexing on Flash">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1081-log-structured-merge-lsm-tree" class="md-nav__link">
    <span class="md-ellipsis">
      10.8.1 Log Structured Merge (LSM) Tree
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1082-buffer-tree" class="md-nav__link">
    <span class="md-ellipsis">
      10.8.2 Buffer Tree
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#109-bitmap-indices" class="md-nav__link">
    <span class="md-ellipsis">
      10.9 Bitmap Indices
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/rescuerz/notebook/blob/main/docs/DB/10. Indexing.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/rescuerz/notebook/raw/main/docs/DB/10. Indexing.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
    </a>
  


<h1 id="10-indexing">10. Indexing<a class="headerlink" href="#10-indexing" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"/></svg></span> 约 4731 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3L12.5 13Z"/></svg></span> 预计阅读时间 24 分钟</p>
</div>
<div class="admonition abstract">
<p class="admonition-title">Abstract</p>
<ul>
<li>Basic Concepts</li>
<li>Ordered Indices </li>
<li>B+-Tree Index</li>
<li>B+-Tree File Organization </li>
<li>B-Tree Index Files</li>
<li>Indices on Multiple Keys</li>
<li>Indexing on Flash</li>
<li>Indexing in Main Memory</li>
<li>Write Optimized Indices</li>
<li>Log Structured Merge (LSM) Tree</li>
<li>Buffer Tree</li>
<li>Bitmap Indices</li>
</ul>
</div>
<h2 id="101-basic-concepts">10.1 Basic Concepts<a class="headerlink" href="#101-basic-concepts" title="Permanent link">&para;</a></h2>
<p><strong>Indexing</strong> mechanisms used to <em><code>speed up access</code></em> to desired data.    </p>
<p><strong>Search Key</strong> - attribute to set of attributes used to look up records in a file.  </p>
<p>搜索键 - 用于查找文件中的记录的一组属性的属性。</p>
<p>An <strong>index file</strong> consists of records (called index entries) of the form.  </p>
<p>索引文件由表单的记录（称为索引条目）组成。</p>
<p>Two basic kinds of indices:</p>
<ul>
<li>
<p><strong>Ordered indices</strong>: search keys are stored in <strong>sorted order</strong></p>
</li>
<li>
<p><strong>Hash indices</strong>: search keys are distributed uniformly across “buckets” using a “hash function”. </p>
</li>
</ul>
<h3 id="1011-index-evaluation-metrics">10.1.1 Index Evaluation Metrics<a class="headerlink" href="#1011-index-evaluation-metrics" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>评估指标</strong></p>
</blockquote>
<ul>
<li>Access types supported efficiently<ul>
<li><strong>Point query</strong>: records with a specified value in the attribute. 点查询：属性中具有指定值的记录</li>
<li><strong>Range query</strong>: records with an attribute value falling in a specified range of values.  范围查询：属性值落在指定值范围内的记录。</li>
</ul>
</li>
<li>Access time</li>
<li>Insertion time</li>
<li>Deletion time</li>
<li>Space overhead</li>
</ul>
<h2 id="102-ordered-indices">10.2 Ordered Indices<a class="headerlink" href="#102-ordered-indices" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><strong>Primary index（主索引）</strong>: in a <code>sequentially ordered file</code>, the index whose search key specifies the sequential order of the file.  </p>
<p><strong>主索引</strong>：在按顺序排序的文件中，其搜索键指定文件顺序的索引。<strong><code>也就是说文件恰好按照search key 进行排序</code></strong></p>
<ul>
<li>
<p>Also called clustering index（聚集索引）</p>
</li>
<li>
<p>The search key of a primary index is <strong>usually</strong> but not necessarily the primary key.</p>
</li>
</ul>
<p><strong><code>search key通常是主键，但是不一定是主键，因为primary key可能由多个属性组合，但是search只能是一种</code></strong></p>
</li>
<li>
<p><strong>Secondary index（辅助索引）</strong>: an index whose search key specifies an order different from the sequential order of the file.  Also called non-clustering index.</p>
<p><strong>辅助索引：</strong>搜索键指定的顺序与文件的顺序不同的索引（例如：学生的学号搜索和id不一致）</p>
</li>
</ul>
<blockquote>
<p><strong>primary index on</strong> <strong>ID</strong> <strong>attribute of</strong> <strong>instructor</strong></p>
<p>主索引和数据内的顺序是一样的。<strong>点查和范围查都是比较高效的</strong>。</p>
</blockquote>
<p><center>
        <div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291313790.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291313790.png" width =80%/></a> </div>
  </center></p>
<blockquote>
<p><strong>Secondary index on</strong> <strong>salary</strong> <strong>attribute of</strong> <strong>instructor</strong></p>
<p><strong><code>如果 key 不是一个主键，那可能会对应多个记录。</code></strong></p>
<p>工资作为辅助索引，点搜索，<strong>需要先收集所有指定工资的老师的地址</strong>，再用一个头指针联系在一起。value -&gt; 头结点（多个） -&gt; 结果</p>
</blockquote>
<p><center>
    <div align=center> <a class="glightbox" href="http://cdn.hobbitqia.cc/202305081007582.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202305081007582.png" width = 80%/></a> </div>
</center></p>
<p>Primary index 是很宝贵的，只能有一个，其他都是辅助索引。    </p>
<ul>
<li>
<p><strong>Dense index(稠密索引)</strong> — Index record appears for every search-key value in the file.   </p>
<p>每一个数据文件中的索引值，都要出现在索引文件里面。</p>
</li>
</ul>
<p><strong><code>根据搜索结果，每一个搜索键值都有一个索引</code></strong></p>
<p><center>
      <center>
      <div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291342716.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291342716.png" width = 80%/></a> </div>
      <div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291342865.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291342865.png" width = 80%/></a> </div>
      </center>
  </center></p>
<ul>
<li>
<p><strong>Sparse Index（稀疏索引）</strong>:  contains index records for only some search-key values.</p>
<p>稀疏索引（稀疏索引）：<strong>仅包含某些搜索键值</strong>的索引记录。</p>
<p><center>
      <center>
      <div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291343335.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291343335.png" width = 80%/></a> </div>
      </center>
  </center></p>
<ul>
<li>
<p>Less space and less maintenance overhead for insertions and deletions.</p>
<p>更少的空间和更少的插入和删除维护开销。</p>
</li>
<li>
<p>Generally slower than dense index for locating records.</p>
<p>用于查找记录，通常比密集索引慢，</p>
</li>
</ul>
</li>
</ul>
<p>Good tradeoff: sparse index with an index entry for every block in file, corresponding to least search-key value in the block.</p>
<p>良好的权衡：稀疏索引，文件中每个块都有一个索引条目，对应于块中的最小搜索键值。</p>
<ul>
<li><strong>Multilevel Index 多级索引</strong></li>
</ul>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217965.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240503215142781" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217965.png" /></a></p>
<p>如果主索引不适合放在内存（索引过大），此时访问会变得十分高昂</p>
<p>解决方案：<strong><code>将保存在磁盘上的主索引看作是一个顺序文件，在主索引上进一步构造稀疏索引</code></strong></p>
<ul>
<li>外部索引——主索引的稀疏索引</li>
<li>内部索引——primary index</li>
</ul>
<p>如果外部索引依然过大，可以针对外部索引进一步创建索引。从记录文件中插入或者删除时，必须更新所有级别的索引。</p>
<h2 id="103-b-tree-index">10.3 B+-Tree Index<a class="headerlink" href="#103-b-tree-index" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>All paths from root to leaf are of the same length</p>
<p>从根到叶的所有路径都具有相同的长度</p>
</li>
<li>
<p><strong>Inner node</strong>(not a root or a leaf): between <span class="arithmatex">\(\lceil n/2\rceil\)</span> and <span class="arithmatex">\(n\)</span> children.</p>
<p>内部节点（不是根或叶）：<span class="arithmatex">\(\lceil n/2\rceil\)</span> 到 <span class="arithmatex">\(n\)</span> 个孩子</p>
</li>
<li>
<p><strong>Leaf node</strong>: between <span class="arithmatex">\(\lfloor n/2\rfloor\)</span> and <span class="arithmatex">\(n–1\)</span> values</p>
</li>
<li>
<p>Special cases: </p>
<ul>
<li>If the root is not a leaf:  at least 2 children.</li>
<li>If the root is a leaf :  between 0 and (n–1)values.</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong><code>一般一个节点就是一个数据块的大小, 4K.</code></strong></p>
<p>B+ 树的叉是非常多的，相应的高度就很低。</p>
<p>eg: 假设存放的数据是学号占10 bytes，指针占4 bytes，那么分叉数(max)= （4096 / （10+4））+1 = 293. 分叉数(min) =  <span class="arithmatex">\(\lceil n/2\rceil\)</span> = 147</p>
</blockquote>
<div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291349008.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291349008.png" width = 100%/></a> </div>

<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217958.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240429140114379" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217958.png" /></a></p>
<blockquote>
<p><strong>关于inner node结点的结构</strong></p>
<p><strong>你会发现指针的数量是value数量+1，说明分叉数(孩子数)是serach key value数量+1</strong></p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217962.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240503220951993" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217962.png" /></a></p>
<blockquote>
<p><strong>关于叶结点的结构</strong></p>
<ul>
<li><strong>由于B+树的叶结点只能够<span class="arithmatex">\(n-1\)</span>个value，所以对于$ i = 1， 2， . . .， n–1<span class="arithmatex">\(，指针\)</span> Pi$ 指向搜索键值为 <span class="arithmatex">\(Ki\)</span> 的文件记录</strong></li>
<li><strong>多出来的指针<span class="arithmatex">\(P_n\)</span>指向下一个叶子结点，也就是将所有的叶子结点连接在一起</strong></li>
</ul>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217946.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240503221331929" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032217946.png" /></a></p>
<blockquote>
<p>*<em><code>Example of B+-tree*</code></em></p>
</blockquote>
<ul>
<li>
<p>B+-tree for instructor file <strong>(<em>n</em> = 6) 内部结点指针最大个数（分叉数）</strong></p>
</li>
<li>
<p>Leaf nodes must have between 3 and 5 <strong>values</strong> </p>
<p><strong><mark>between <span class="arithmatex">\(\lceil (n–1)/2\rceil\)</span> and <span class="arithmatex">\(n–1\)</span> values</mark></strong></p>
</li>
<li>
<p>Non-leaf nodes <strong>other than root</strong> must have between 3 and 6 <strong>children</strong></p>
<p><strong><mark>between <span class="arithmatex">\(\lceil n/2\rceil\)</span>  or <span class="arithmatex">\(\lfloor (n+1)/2 \rfloor\)</span>and <span class="arithmatex">\(n\)</span> children.</mark></strong></p>
<p>相应的value的数量为between<span class="arithmatex">\(\lceil n/2\rceil - 1\)</span> and <span class="arithmatex">\(n–1\)</span></p>
</li>
<li>
<p>Root must have at least 2 children.</p>
</li>
</ul>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032215662.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240503221526619" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405032215662.png" /></a></p>
<h3 id="1031-observations-about-b-trees">10.3.1 Observations about B+-trees<a class="headerlink" href="#1031-observations-about-b-trees" title="Permanent link">&para;</a></h3>
<p>如果有很多文件一次性建立 B+ 树，我们可以从叶子节点开始建立。</p>
<ul>
<li>
<p>Level below root has at least <span class="arithmatex">\(2 \times \lceil n/2\rceil\)</span> 指针</p>
<p><strong><code>每一个inner node 最少具有</code><span class="arithmatex">\(\lfloor (n+1)/2 \rfloor\)</span>个指针</strong></p>
<p><strong>根结点至少有两个孩子</strong></p>
</li>
<li>
<p>Next level has at least <span class="arithmatex">\(2 \times \lceil n/2\rceil \times \lceil n/2\rceil\)</span>指针s</p>
<p>如果有 K 个索引项（K个根结点），则树高度不会超过 <span class="arithmatex">\(\lceil \log_{\lceil n/2 \rceil}(K/2)\rceil + 1\)</span>.  高度最小为 <span class="arithmatex">\(\log_n(K)\)</span></p>
</li>
</ul>
<h3 id="1032-find--insert--delete">10.3.2 Find &amp; Insert &amp; Delete<a class="headerlink" href="#1032-find--insert--delete" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>Example “Query on B+ Tree”</strong></p>
<p><strong>对于range query，先找到下界和上界，再利用leaf是利用指针连接在一起的，所以能获得结果</strong></p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291407784.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240429140705711" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291407784.png" /></a></p>
<blockquote>
<p><strong>Example "Examples of Insert on B+-Tree"</strong></p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291407002.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240429140750932" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291407002.png" /></a></p>
<p><strong>B+-Tree before and after insertion of “Adams ”</strong></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291408433.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240429140803375" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291408433.png" /></a></p>
<blockquote>
<p><strong><code>inner node 的 split</code></strong></p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291410688.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240429141015589" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291410688.png" /></a></p>
<p>注意内点的 split 和叶子的不一样。要把中间的节点 move 上去。</p>
<blockquote>
<p><strong>Example "Examples of Delete on B+-Tree"</strong></p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202408282155988.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240828215504786" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202408282155988.png" /></a></p>
<p>当一个blcok中的记录被删除时，判断此时这个叶结点中value的数量是否大于等于<span class="arithmatex">\(\lfloor n/2 \rfloor\)</span>。如果小于了，就要寻求与兄弟结点合并。</p>
<ul>
<li>如果可以与兄弟结点合并，就要在合并之后，检查父亲结点的指针数目是否大于等于<span class="arithmatex">\(\lfloor (n+1)/2 \rfloor\)</span>,依次类推</li>
<li>如果不能合并，兄弟节点的value已经满了。那么就从兄弟结点中借一条记录，补充到当前结点</li>
</ul>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291416151.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240429141628101" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291416151.png" /></a></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041426600.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504142639527" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041426600.png" /></a></p>
<h3 id="1033-b--tree--height-and-size-estimation">10.3.3 B+- tree : height and size estimation<a class="headerlink" href="#1033-b--tree--height-and-size-estimation" title="Permanent link">&para;</a></h3>
<p><center>
    <img src = "https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041406073.png" >
</center></p>
<p>假设一个block的大小是4K，每一个person的大小是68，因此一个block中的记录数量是60个。</p>
<p>为了记录1000000个person，我们需要16667个block。</p>
<blockquote>
<p><strong><code>B+树的叶子结点不再放入记录指针，而是放入记录本身</code></strong></p>
</blockquote>
<p>下面计算B+树的n。由于B+树的一个块是4096大小，包含n个指针（大小为4），与n-1个关键字大小（为pid，大小为18），因此计算公式为：<span class="arithmatex">\(（4096-4）/(18+4) + 1 = 187\)</span>。</p>
<p><strong>对于内部结点，其孩子指针最多有n = 187个，其孩子指针最少有<span class="arithmatex">\(\lceil n/2 \rceil = 94\)</span>个，对于叶子结点，value最多有<span class="arithmatex">\(n-1 = 186\)</span>个，最少有<span class="arithmatex">\(94 -1 = 93\)</span>个</strong></p>
<p>两层太少，四层太多，可以判断出，表示1000000个person，需要这样的B+树恰好是三层。</p>
<p><strong>求出用三层的n为187的B+树来表示1000000个person，所需结点数目的最小值和最大值</strong></p>
<ul>
<li>
<p>最大值：对于叶结点，让叶结点保留最少的value，也就是93，此时所需的叶结点数量最多,需要<span class="arithmatex">\(1000000 / 93 = 10752.69\)</span>,<strong><code>注意这里需要向下取整，否则会有叶结点的value小于93</code></strong>。第二层的计算和根结点的计算都是用最少的指针数94，需要<span class="arithmatex">\(\lfloor 10752/94 \rfloor = 114\)</span>,最后还需要一个根结点。</p>
<p>最终需要<span class="arithmatex">\(10752 + 114 + 1 = 10867\)</span>个结点</p>
</li>
<li>
<p>对于叶节点，最多有186个值，因此叶节点最少个数可以用<span class="arithmatex">\(1000000/186\)</span>，得到5736.344，<strong><code>注意这里要进行上取整，否则将至少有一个叶结点包含的值大于186个</code></strong>。其余第二层与根节点的计算以此类推，由于第二层的孩子个数最多为187个，因此第二层将5377除以187，并且向上取整。</p>
<p>最终需要<span class="arithmatex">\(5377 + 29 + 1 = 5407\)</span>个结点</p>
</li>
</ul>
<div>
    <div align=center> <a class="glightbox" href="http://cdn.hobbitqia.cc/202305081105237.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202305081105237.png" width = 80%/></a> </div>
</div>

<h2 id="104-b-tree-file-organization">10.4 B+-Tree File Organization<a class="headerlink" href="#104-b-tree-file-organization" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>File Organization: heap堆结构，sequential顺序结构，hash结构，B+树结构</strong></p>
</blockquote>
<p>文件组织  B+-Tree File Organization:</p>
<ul>
<li>
<p>Leaf nodes in a B+-tree file organization store records, instead of pointers  </p>
<p>叶子节点不再放索引项，放记录本身。 </p>
</li>
<li>
<p>Helps keep data records clustered even when there are insertions/deletions/updates  </p>
</li>
</ul>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041437502.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504143702441" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041437502.png" /></a></p>
<p>我们可以改变<strong>半满</strong>的要求以提高空间利用率。</p>
<h3 id="1041-other-issues-in-indexing">10.4.1 Other Issues in Indexing<a class="headerlink" href="#1041-other-issues-in-indexing" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Record relocation and secondary indices</strong></p>
<p><strong>记录搬迁和辅助索引</strong>  </p>
<p>If a record moves, all secondary indices that store record pointers have to be updated   </p>
<p>如果记录移动，则必须更新存储记录指针的所有辅助索引</p>
<p>Node splits in B+-tree file organizations become very expensive  </p>
<p>Solution: use primary-index search key instead of record pointer in secondary index</p>
<p>解决方案：在辅助索引中使用主索引搜索键而不是记录指针</p>
<blockquote>
<p><strong>例如：利用学生的名字找到primary key（辅助索引），再利用primary key对应物理地址（主索引），一旦地址改变，只需要修改主索引中的primary key即可</strong></p>
<p><code>好处是：地址改变时只需要修改局部，坏处是：查找时需要先找到primary key，再通过primary key找到对应的地址</code></p>
</blockquote>
</li>
<li>
<p><strong>Variable length strings as keys 变长字符串作为key</strong>  </p>
<p><strong>Variable fanout  使用空间利用率（space utilization）作为拆分的标准，而不是指针数</strong></p>
</li>
<li>
<p><strong>Prefix compression 前缀压缩</strong>  </p>
<p>Key values at internal nodes can be prefixes of full key  </p>
<p>内部节点的键值可以是完整键的前缀</p>
<p><strong>Keep enough characters to distinguish entries in the subtrees separated by the key value</strong></p>
<p><strong>保留足够的字符来区分子树中由键值分隔的条目</strong></p>
<p>Keys in leaf node can be compressed by sharing common prefixes</p>
<p>叶节点中的键可以通过共享公共前缀来压缩</p>
</li>
</ul>
<h2 id="105-bulk-loading-and-bottom-up-build">10.5 Bulk Loading and Bottom-Up Build<a class="headerlink" href="#105-bulk-loading-and-bottom-up-build" title="Permanent link">&para;</a></h2>
<h3 id="1051-bottom-up-build">10.5.1 Bottom-Up Build<a class="headerlink" href="#1051-bottom-up-build" title="Permanent link">&para;</a></h3>
<p>Inserting entries one-at-a-time into a B+-tree requires <span class="arithmatex">\(\geq 1\)</span> IO per entry   </p>
<p><strong>给定一大批的数据，需要建立B+树索引，相当于要一次性插入很多索引项</strong></p>
<ul>
<li>
<p><code>Efficient alternative 1: Insert in sorted order</code></p>
<p>先排序再插入，局部性较好，减少 I/O. </p>
<p>缺点：大多数叶节点是半满的，B+树效率较低。</p>
</li>
<li>
<p><code>Efficient alternative 2: Bottom-up B+-tree construction</code></p>
<ul>
<li>
<p>First sort index entries  首先对索引条目进行排序</p>
</li>
<li>
<p>Then create B+-tree layer-by-layer, starting with leaf level</p>
<p>然后逐层创建 B+-tree，从叶级别开始</p>
</li>
<li>
<p>The built B+-tree is written to disk using <strong>sequential I/O</strong> operations</p>
<p>使用顺序 I/O 操作将构建的 B+ 树写入磁盘</p>
</li>
</ul>
</li>
</ul>
<p><center>
        <div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291313431.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291313431.png" width = 100%/></a> </div>
</center></p>
<p><strong>存在问题：假如需要排序的索引能够放在内存当中，那么内部排序一次排好。假如需要排序的索引不能放在内存中，那么需要使用外部排序方法。</strong></p>
<p><strong>自底向上构建B+树构建完成后，如何写回到磁盘中？可以一次性写回去，也可以边构建边写回去。</strong></p>
<p><strong><code>最好的方式：一层一层写回去，从叶子层开始，层序向上遍历。（本质是边构建边写回）</code></strong></p>
<p><strong>代价：1 seek（定位） + 9 block transfer</strong></p>
<p><strong>这样的好处是：假如我们要顺序访问（扫描或者range query）所有的索引项，这些索引项是全部放在磁盘的同一区域的，且是连续放置的。磁盘读写头只需要一次定位</strong></p>
<h3 id="1052-bulk-insert-index-entries">10.5.2 Bulk insert index entries<a class="headerlink" href="#1052-bulk-insert-index-entries" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>批量装载</strong></p>
<p><strong>假如有两颗B+树，都是由底向上构建起来的，那么此时如果我们想要Merge这两棵B+树，该怎么办</strong></p>
<p><strong>直接重构一个B+树。先对所有的叶结点的键值进行排序，这两棵B+树的叶子结点都是有序的且连续存放在磁盘中。所以我们对这两棵树的叶子结点的键值分别直接进行一次Seek，再利用mergesort即可</strong></p>
</blockquote>
<p><center>
        <div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291313374.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202404291313374.png" width = 100%/></a> </div>
</center></p>
<ul>
<li><strong>第一步：先对这些键值排好序。</strong></li>
<li><strong>第二步：从磁盘中读取上一个B+树的所有叶子结点，进入内存当中，由于上一个B+树的叶子结点都是连续存放的，因此需要1次Seek，6次Block Transfer。</strong></li>
<li><strong>第三步：利用这些新的键值，和前面那颗B+树已经在内存中的键值，排好序，在内存中构建出新的B+树</strong></li>
<li><strong>第四步：把这个处于内存中的B+树按照从底向上层序遍历的顺序，写回到磁盘中，需要1次Seek，13个Block Transfer。</strong></li>
</ul>
<p>Merge two existing two B+-trees , to create a new B+-tree using the Bottom-UP Build algorithm, as in LSM-tree Index  </p>
<p>假设有两棵这样生成的 B+ 树，将他们合并在一起。首先把叶子节点拿出来排序。  </p>
<h2 id="106-multiple-key-access">10.6 Multiple-Key Access<a class="headerlink" href="#106-multiple-key-access" title="Permanent link">&para;</a></h2>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041523221.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504152354166" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041523221.png" /></a></p>
<blockquote>
<ol>
<li><code>方法一：</code><strong>分别对dept_name 和 salary都建立索引，查询之后求交集即可</strong></li>
<li><code>方法二：</code><strong>建立二元组（符合搜索键），词典排序</strong></li>
</ol>
</blockquote>
<h3 id="1061-indices-on-multiple-keys">10.6.1 Indices on Multiple Keys<a class="headerlink" href="#1061-indices-on-multiple-keys" title="Permanent link">&para;</a></h3>
<p><strong>Composite search keys</strong> are search keys containing more than one attribute  <strong>复合搜索键是包含多个属性的搜索键</strong></p>
<p><strong>Lexicographic ordering</strong>: <span class="arithmatex">\((a_1, a_2) &lt; (b_1, b_2)\)</span> if either <span class="arithmatex">\(a_1 &lt; b_1\)</span>, or <span class="arithmatex">\(a_1=b_1\)</span> and <span class="arithmatex">\(a_2 &lt; b_2\)</span>.  </p>
<p>单个 key, 不同 key 之间组合都可以建立 B+ 树。这样会有很多组合，可以在频繁出现的查询属性上建立 B+ 树。</p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041527696.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504152733637" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041527696.png" /></a></p>
<blockquote>
<p><strong><code>利用复合搜索键构建的B+树，如果仅仅利用第二个属性进行查询，效果往往不适合很好，如上方的salary，所有的数据都是东一块西一块</code></strong></p>
</blockquote>
<h2 id="107-indexing-in-main-memory">10.7 Indexing in Main Memory<a class="headerlink" href="#107-indexing-in-main-memory" title="Permanent link">&para;</a></h2>
<div align=center> <a class="glightbox" href="http://cdn.hobbitqia.cc/202305132259492.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202305132259492.png" width = 40%/></a> </div>

<p><strong><code>cache 按 cache line 传输, 只有 64B.</code></strong> </p>
<ul>
<li>
<p>Random access in memory  </p>
<ul>
<li>
<p>Much cheaper than on disk/flash, but still expensive compared to cache read</p>
</li>
<li>
<p>Binary search for a key value within a large B+-tree node results in many cache misses  </p>
<p>二分查找可能带来很多 cache miss.  </p>
</li>
<li>
<p>Data structures that make best use of cache preferable – <strong>cache conscious</strong>  </p>
<p>最好利用cache的数据结构 - <strong>缓存意识</strong></p>
</li>
</ul>
</li>
</ul>
<p><strong>B+- trees with <em>small nodes</em> that fit in cache line are preferable to reduce cache misses  最好使用具有适合缓存行的 <em>小节点</em> 的 B+- 树来减少缓存miss</strong></p>
<p>search key 和 pointer 可以分开放。</p>
<p>Key idea:  </p>
<ul>
<li>
<p>use large node size to optimize disk access, </p>
</li>
<li>
<p>but structure data within a node using a tree with small node size, instead of using an array, to optimize cache access.</p>
</li>
</ul>
<p><strong>但是使用节点大小较小的树而不是使用数组来构建节点内的数据，以优化缓存访问。</strong></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041538971.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504153804914" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041538971.png" /></a></p>
<p><strong>例如，把B+树的结点和指针分开来排列；又例如，把B+树的每一个结点上，建立一个小B+树，用来快速查找键值。</strong></p>
<h2 id="108-indexing-on-flash">10.8 Indexing on Flash<a class="headerlink" href="#108-indexing-on-flash" title="Permanent link">&para;</a></h2>
<p>Flash 里不是即时修改，而是先擦掉再写。同时擦的次数是有限制的。因此最好的方法是从底构建，然后顺序写入。</p>
<ul>
<li>
<p>Random I/O cost much lower on flash  </p>
<p>20 to 100 microseconds for read/write</p>
</li>
<li>
<p>Writes are not in-place, and (eventually) require a more expensive erase <strong>写入不是就地的，并且（最终）需要更昂贵的擦除</strong></p>
</li>
<li>
<p>Optimum page size therefore much smaller</p>
</li>
<li>
<p>Bulk-loading still useful since it minimizes page erases</p>
<p><strong>批量加载仍然有用，因为它可以最大限度地减少页面擦除</strong></p>
</li>
<li>
<p>Write-optimized tree structures (i.e., LSM-tree) have been adapted to minimize page writes for flash-optimized search trees  </p>
</li>
</ul>
<p>写优化索引结构 </p>
<blockquote>
<p>Two approaches to reducing cost of writes</p>
<ul>
<li>
<p><strong>Log-structured merge tree (</strong><strong>LSM-tree</strong><strong>)</strong></p>
</li>
<li>
<p><strong>Buffer tree</strong></p>
</li>
</ul>
</blockquote>
<h3 id="1081-log-structured-merge-lsm-tree">10.8.1 Log Structured Merge (LSM) Tree<a class="headerlink" href="#1081-log-structured-merge-lsm-tree" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>日志归并树</strong></p>
</blockquote>
<div align=center> <a class="glightbox" href="http://cdn.hobbitqia.cc/202305132309866.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202305132309866.png" width = 60%/></a> </div>

<ul>
<li>首先内存中有一个B+树<span class="arithmatex">\(L_0\)</span>,内存中的B+树写满之后，马上写入到磁盘中。<strong>这个写操作，只需要把B+树叶子结点上的这些块写进磁盘，可以做到刚刚所述的 1次Seek，然后连续写入。</strong></li>
<li>下次，<strong>内存中的B+树（<span class="arithmatex">\(L_0\)</span>）又满了，就可以和磁盘中的B+树(<span class="arithmatex">\(L_1\)</span>)进行合并</strong>，相当于内存中B+树的叶子，要和磁盘中B+树的叶子合并。因此，<strong>需要两次Seek，加上合并好的树的结点数目个Transfer + 磁盘中B+树叶节点块数个Transfer。</strong></li>
<li>在磁盘中，如果<span class="arithmatex">\(L1\)</span>这个B+树满了（磁盘中对各个大小的B+树都有大小限制），那么就会自动拷贝到<span class="arithmatex">\(L2\)</span>的位置，把L1的位置空出来，以此类推。</li>
<li><code>Size threshold for $L_{i+1}$ tree is $k$ times size threshold for $L_i$ tree</code></li>
</ul>
<p>这样我们把随机写变为了顺序写。但此时查找一个索引，就要遍历所有 B+ 树。</p>
<ul>
<li>
<p>Benefits of LSM approach</p>
<ul>
<li>
<p>Inserts are done using only <strong>sequential I/O</strong> operations</p>
<p>仅使用<strong>顺序 I/O 操作</strong>完成插入</p>
</li>
<li>
<p><strong>Leaves are full</strong>, avoiding space wastage</p>
<p>叶子饱满，避免空间浪费</p>
</li>
<li>
<p>Reduced number of I/O operations per record inserted as compared to normal B+-tree (up to some size)</p>
<p>与普通 B+ 树相比，<strong>每条记录插入的 I/O 操作数减少</strong>（最多一些大小）</p>
</li>
</ul>
</li>
<li>
<p>Drawback of LSM approach</p>
<ul>
<li>
<p>Queries have to search multiple trees</p>
<p><strong>假如我们要查找一个键值，本来我们只需要在一个B+树中查找，现在我们要在L0、L1、L2…这些B+树种，都要查找，查询代价增大。</strong></p>
</li>
<li>
<p>Entire content of each level copied multiple times</p>
<p>每个level的全部内容被复制了多次</p>
<p><strong>每次内存种的B+树满了以后都需要合并，合并次数太多。</strong></p>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>Stepped Merge Index</strong>  </p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041554782.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504155456702" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041554782.png" /></a></p>
<p><strong><code>Stepped-merge index: variant of LSM tree with *k* trees at each level on disk</code></strong></p>
<ul>
<li>When all <em>k</em> indices exist at a level, merge them into one index of next level. </li>
<li>Reduces write cost compared to LSM tree</li>
</ul>
<p>But queries are even more expensive since many trees need to be queries</p>
<p>原先的结构中，Merge 操作太多，我们可以一次性合并。</p>
<p><strong>内存中的B+树满了，先写到磁盘中；下次内存中B+树又满了，又写到内存中。直到磁盘中L0级别大小的B+树达到K个以后，再一起合并成一个大的L1。</strong></p>
<blockquote>
<p><strong>上述优化结构，虽然减少了Merge的次数，且由于每次合并是顺序访问，减少磁盘I/O的次数；但是缺点是查找更加麻烦(磁盘中B+树的数量更多，因此查找一个键值，需要每一个B+树都查找一遍)。</strong></p>
<p><strong>Bloom Filter</strong></p>
</blockquote>
<p><strong>Bloom Filter 相当于对数据的bit进行记录，如果当前位是1，就当检测的对应位置为1，查询时，我们将查询key的值与检测bits进行比对，如果有一位对不上，说明肯定找不到，如果全都对上了，也不一定能找到</strong></p>
<p><strong>为此，可以在磁盘上每一个B+树上加上一个布隆过滤器。每次要查找一个键值时，首先判断一下这个键值可不可能在这棵树中；若不可能，那么这棵树根本不用去查找。</strong></p>
<h3 id="1082-buffer-tree">10.8.2 Buffer Tree<a class="headerlink" href="#1082-buffer-tree" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041605002.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504160539962" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041605002.png" /></a></p>
<ul>
<li>
<p><strong>向B+树中插入一个键值时，不是直接向下传输，传到叶节点中，而是先放在内部节点中的一个小小的Buffer中。</strong></p>
</li>
<li>
<p><strong>缓冲区满了以后，插入的内容会移动到更低的级别，也就是下一层，这一层的子节点的buffer。</strong></p>
</li>
<li>
<p><strong><code>假如一个buffer tree的内部结点需要分裂，那么缓冲区中的内容也会分裂，各自分裂进入各自的部分</code>。</strong></p>
</li>
</ul>
<blockquote>
<p><strong>好处：可以减少查询开销。每次查询有可能不必查询到叶子结点才能得到结果。</strong></p>
<p><strong>坏处：相比LSM树在磁盘中顺序存放的结构,Buffer Tree 的磁盘I/O开销增大。</strong></p>
</blockquote>
<h2 id="109-bitmap-indices">10.9 Bitmap Indices<a class="headerlink" href="#109-bitmap-indices" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>适用于大数据分析</strong></p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041609999.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240504160956924" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202405041609999.png" /></a></p>
<p>查询时只需要进行对应<strong>bit数组</strong>的AND即可</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy 2024 rescuerz
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.expand", "navigation.top", "search.highlight", "search.share", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../supports/js/xlink.js"></script>
      
        <script src="../../supports/js/katex.js"></script>
      
        <script src="https://jsd.cdn.zzko.cn/npm/katex@0.16.4/dist/katex.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>