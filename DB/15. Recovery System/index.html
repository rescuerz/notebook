
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="rescuerz's notebook">
      
      
      
      
        <link rel="prev" href="../14.%20Concurrency%20Control/">
      
      
        <link rel="next" href="../../CV/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>十五. Recovery System - rescuerz's notebook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeline.css">
    
      <link rel="stylesheet" href="../../supports/css/base.css">
    
      <link rel="stylesheet" href="../../supports/css/theme.css">
    
      <link rel="stylesheet" href="../../supports/css/admonitions.css">
    
      <link rel="stylesheet" href="https://jsd.cdn.zzko.cn/npm/katex@0.16.4/dist/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#十五-recovery-system" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../.." title="rescuerz&#39;s notebook" class="md-header__button md-logo" aria-label="rescuerz's notebook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            rescuerz's notebook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              十五. Recovery System
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/rescuerz/notebook" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    rescuerz/notebook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../ADS/" class="md-tabs__link">
          
  
    
  
  Computer Science

        </a>
      </li>
    
  

    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  System

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../CV/" class="md-tabs__link">
          
  
    
  
  Artificial Intelligence

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="rescuerz&#39;s notebook" class="md-nav__button md-logo" aria-label="rescuerz's notebook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    rescuerz's notebook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rescuerz/notebook" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    rescuerz/notebook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    更新记录
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../link/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    友链
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Computer Science
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Computer Science
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ADS/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            高级数据结构与算法分析
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/1.%20AVL_tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. AVL Tree &amp; Splay Tree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/2.%20Red%20Black%20Tree%20%26%20B%2B%20Tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Red Black Tree &amp; B+ Tree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/3.%20Inverted%20File%20Index/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Inverted File Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/4.%20Leftist%20Heaps%20and%20Skew%20Heaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Leftist Heap &amp; Skew Heap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/5.%20Binomial%20Queue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5. Binomial Queue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/6.%20backtracking/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. Backtracking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/7.%20Divide%20%26%20Conquer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Divide &amp; Conquer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/8.%20Dynamic%20Programming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Dynamic Programming
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/9.%20Greedy%20Algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Greedy Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/10.%20NP-Completeness/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. NP-Completeness
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/11.%20Approximation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. Approximation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/12.%20Local%20Search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12. Local Search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/13.%20Randomized%20Algorithms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13. Randomized Algorithms
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/14.%20Parallel%20Algorithm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14. Parallel Algorithm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ADS/15.%20External%20Sorting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15. External Sorting
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    System
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    数据库系统
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            数据库系统
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1.%20Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2.%20Relational%20Model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Relational Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3.%20SQL/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. SQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6.%20Entity-Relationship%20Model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    六.Entity-Relationship Model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7.%20Relational%20Database%20Design/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    七. Relational Database Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8.%20Physical%20Storage%20Systems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    八. Physical Storage Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9.%20Data%20Storage%20Structures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    九. Data Storage Structures
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10.%20Indexing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    十. Indexing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11.%20Query%20Processing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    十一. Query Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12.%20Query%20Optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    十二. Query Optimization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13.%20Transaction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    十三. Transactions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14.%20Concurrency%20Control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    十四. Concurrency Control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    十五. Recovery System
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    十五. Recovery System
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#151-failure-classification" class="md-nav__link">
    <span class="md-ellipsis">
      15.1 Failure Classification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#152-storage-structure" class="md-nav__link">
    <span class="md-ellipsis">
      15.2 Storage Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.2 Storage Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1521-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      15.2.1 Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1522-database-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      15.2.2 Database Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#153-log-based-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      15.3 Log-Based Recovery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.3 Log-Based Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1531-log-records" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.1 Log Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1532-write-ahead-logging" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.2 Write-Ahead Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1533-transaction-commit" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.3 Transaction Commit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1534-undo撤销-and-redo重做-operations" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.4 Undo(撤销) and Redo（重做） Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1535-checkpoints" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.5 Checkpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1536-log--buffer--database-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.6 Log  Buffer &amp; Database Buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1537-fuzzy-checkpointing" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.7 Fuzzy Checkpointing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1538-failure-with-loss-of-nonvolatile-storage" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.8 Failure with Loss of Nonvolatile Storage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#154-recovery-with-early-lock-release-and-logical-undo-operations" class="md-nav__link">
    <span class="md-ellipsis">
      15.4 Recovery with Early Lock Release and Logical Undo Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.4 Recovery with Early Lock Release and Logical Undo Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1541-logical-undo-logging" class="md-nav__link">
    <span class="md-ellipsis">
      15.4.1 Logical Undo Logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#155-aries-recovery-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      15.5 ARIES Recovery Algorithm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.5 ARIES Recovery Algorithm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1551-aries-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      15.5.1 ARIES Data Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.5.1 ARIES Data Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-lsn" class="md-nav__link">
    <span class="md-ellipsis">
      Page LSN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-record" class="md-nav__link">
    <span class="md-ellipsis">
      Log Record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dirty-page-table" class="md-nav__link">
    <span class="md-ellipsis">
      Dirty Page Table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1552-aries-recovery-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      15.5.2 ARIES Recovery Algorithm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Artificial Intelligence
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Artificial Intelligence
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../CV/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Computer Vision
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Computer Vision
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture1_Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture2_Image_Classification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Image_Classification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture3_Linear_Classifiers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linear_Classifier
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture4_Optimization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optimization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture5_Neural_Networks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Neural Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture6_Backpropagation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backpropagation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture7_ConvolutionalNetworks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Convolutional Neural Networks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture8_CNN_Architectures/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CNN Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../CV/Lecture9_Hardware_and_Software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware and Software
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#151-failure-classification" class="md-nav__link">
    <span class="md-ellipsis">
      15.1 Failure Classification
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#152-storage-structure" class="md-nav__link">
    <span class="md-ellipsis">
      15.2 Storage Structure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.2 Storage Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1521-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      15.2.1 Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1522-database-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      15.2.2 Database Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#153-log-based-recovery" class="md-nav__link">
    <span class="md-ellipsis">
      15.3 Log-Based Recovery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.3 Log-Based Recovery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1531-log-records" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.1 Log Records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1532-write-ahead-logging" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.2 Write-Ahead Logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1533-transaction-commit" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.3 Transaction Commit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1534-undo撤销-and-redo重做-operations" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.4 Undo(撤销) and Redo（重做） Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1535-checkpoints" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.5 Checkpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1536-log--buffer--database-buffer" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.6 Log  Buffer &amp; Database Buffer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1537-fuzzy-checkpointing" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.7 Fuzzy Checkpointing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1538-failure-with-loss-of-nonvolatile-storage" class="md-nav__link">
    <span class="md-ellipsis">
      15.3.8 Failure with Loss of Nonvolatile Storage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#154-recovery-with-early-lock-release-and-logical-undo-operations" class="md-nav__link">
    <span class="md-ellipsis">
      15.4 Recovery with Early Lock Release and Logical Undo Operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.4 Recovery with Early Lock Release and Logical Undo Operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1541-logical-undo-logging" class="md-nav__link">
    <span class="md-ellipsis">
      15.4.1 Logical Undo Logging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#155-aries-recovery-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      15.5 ARIES Recovery Algorithm
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.5 ARIES Recovery Algorithm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1551-aries-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      15.5.1 ARIES Data Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="15.5.1 ARIES Data Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#page-lsn" class="md-nav__link">
    <span class="md-ellipsis">
      Page LSN
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-record" class="md-nav__link">
    <span class="md-ellipsis">
      Log Record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dirty-page-table" class="md-nav__link">
    <span class="md-ellipsis">
      Dirty Page Table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1552-aries-recovery-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      15.5.2 ARIES Recovery Algorithm
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/rescuerz/notebook/blob/main/docs/DB/15. Recovery System.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/rescuerz/notebook/raw/main/docs/DB/15. Recovery System.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5Z"/></svg>
    </a>
  


<h1 id="十五-recovery-system">十五. Recovery System<a class="headerlink" href="#十五-recovery-system" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"/></svg></span> 约 6772 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3L12.5 13Z"/></svg></span> 预计阅读时间 34 分钟</p>
</div>
<div class="highlight"><pre><span></span><code>Failure Classification
Storage Structure
Data Access
Recovery and Atomicity
Log-Based Recovery
Remote Backup Systems
Recovery with Early Lock Release and Logical Undo Operations
ARIES Recovery Algorithm
</code></pre></div>
<h2 id="151-failure-classification">15.1 Failure Classification<a class="headerlink" href="#151-failure-classification" title="Permanent link">&para;</a></h2>
<div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031330839.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031330839.png" width = 60%/></a> </div>

<ul>
<li>
<p>Database application  —— <strong>transaction failure</strong></p>
</li>
<li>
<p>逻辑错误：比如不满足数据库约束条件（主键）</p>
</li>
<li>
<p>系统错误：死锁。</p>
<p><strong>常用方法是撤销 undo, 把这个事件抹掉。（基于日志，在产生修改之前先记日志，故障后可以根据日志进行撤销）</strong>  </p>
</li>
<li>
<p>DBMS  </p>
</li>
<li>
<p>掉电</p>
</li>
<li>硬件故障</li>
<li>软件故障  </li>
</ul>
<p><strong>system crash 是全局性的，所有运行的程序都会受到影响。分为两类：一类是事务已经提交（但是数据还在缓冲区），另一类是正在执行的事务（还没有提交）。</strong>  </p>
<p><strong><code>已经提交的事务要 redo(数据可能没写回去), 没有完成的事务要 undo.</code></strong> </p>
<p>先记日志，现在的数据库采用 repeating history 的方法。</p>
<ul>
<li>
<p>Database  </p>
</li>
<li>
<p>介质故障   head crash</p>
</li>
<li>other disk failure</li>
</ul>
<p><strong>要防止介质故障，需要做备份（拷贝或者远程）</strong>  </p>
<h2 id="152-storage-structure">15.2 Storage Structure<a class="headerlink" href="#152-storage-structure" title="Permanent link">&para;</a></h2>
<p>日志可能也会出故障？我们假设日志存储在 Stable storage 里。</p>
<ul>
<li>
<p>Volatile storage  <strong><code>易失性存储: main memory, cache</code></strong></p>
<p><strong>会在system crash（power，hardware，software failure）中损失，符合掉电易失</strong></p>
</li>
<li>
<p>Nonvolatile storage   <strong><code>非易失性存储：disk, tape, flash memory，battery backed up RAM</code></strong></p>
</li>
</ul>
<p><strong>survives system crashes，但仍然存在丢失数据的可能</strong></p>
<ul>
<li>
<p>Stable storage:</p>
<ul>
<li>a <strong><code>mythical(虚拟的)</code></strong> form of storage that <strong><code>survives all failures</code></strong></li>
</ul>
<p>能在所有故障中幸存下来</p>
<ul>
<li>approximated by maintaining multiple copies on distinct nonvolatile media  </li>
</ul>
<p>通过在不同的<strong>非易失性介质</strong>上<strong>维护多个拷贝</strong>来近似</p>
<blockquote>
<p><strong><code>这里，我们假设日志都会记录到stable storage中，不会发生丢失</code></strong></p>
</blockquote>
</li>
</ul>
<h3 id="1521-implementation">15.2.1 Implementation<a class="headerlink" href="#1521-implementation" title="Permanent link">&para;</a></h3>
<ul>
<li>Maintain multiple copies of each block on separate disks</li>
</ul>
<p>在单独的磁盘上维护每个块的多个副本</p>
<ul>
<li>Failure during data transfer can still result in inconsistent copies  </li>
</ul>
<p>数据传输过程中的失败仍可能导致副本不一致</p>
<ul>
<li>Protecting storage media from failure during data transfer </li>
</ul>
<p>保护存储介质在数据传输过程中不会出现故障</p>
<div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031645468.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031645468.png" width = 60%/></a> </div>

<blockquote>
<p><strong><code>Stable Storage的实现方法是：利用多个非易失性的存储介质存储多个副本，进行备份处理。但是仍然存在着数据传输过程中的失败导致副本数据不一致的现象，例如partial failure，目标块接受的信息不正确，total failure目标块没有被更新</code></strong></p>
<p><strong><code>所以我们需要保护存储介质在数据传输过程中不发生故障。解决方法：先将数据写入第一个物理块中，只有第一个块成功且正确的写入，才将相同的数据写入到第二个物理块中，以此类推</code></strong></p>
<p><strong><code>如果已经发现错误了，该怎么办？方法一（expensive）：比较每个磁盘块的两个副本，少数服从多数，直接覆盖。方法二（better）:记录过程中的磁盘在非易失性存储上写入。</code></strong></p>
<p><strong>如果检测到一个不一致的块的副本有错误（校验和错误），请通过其他副本覆盖它。 如果两者都没有错误，但有所不同，请用第一个块覆盖第二个块</strong>。</p>
</blockquote>
<h3 id="1522-database-recovery">15.2.2 Database Recovery<a class="headerlink" href="#1522-database-recovery" title="Permanent link">&para;</a></h3>
<p><strong>Recovery algorithms</strong> are techniques to ensure database consistency and transaction <strong>atomicity</strong> and <strong>durability</strong> despite failures.  </p>
<p>恢复算法是在发生故障时<strong><code>确保数据库一致性以及事务原子性和持久性</code></strong>的技术</p>
<p>Recovery algorithms have two parts</p>
<ul>
<li>Actions taken during normal transaction processing to ensure enough information exists to recover from failures  </li>
</ul>
<p>在正常事务处理期间为<strong><code>确保存在足够的信息以从故障中恢复(写日志)</code></strong>而采取的操作</p>
<p>存在tradeoff，事务处理和故障恢复性能之间的权衡</p>
<p><strong>理想的算法：恢复得很快，对事务正常操作没有影响（记录信息的时候不能消耗太多性能），即兼顾上面两个部分。</strong></p>
<ul>
<li>Actions taken after a failure to recover the database contents to a state that ensures atomicity, consistency and durability </li>
</ul>
<p><strong>出现failure之后，采取措施使数据库的内容恢复到某状态以确保原子性、一致性、持久性</strong></p>
<ul>
<li>
<blockquote>
<p><strong><code>恢复算法包含两部分：一部分是在事务执行时保存信息，用于日后的恢复。一部分是在故障发生之后，采取措施使得数据库恢复到原来的一致性原子性持久性状态</code></strong></p>
</blockquote>
</li>
</ul>
<p><strong>We assume that strict two-phase locking ensures no dirty read.</strong>  </p>
<blockquote>
<p><strong><code>使用严格两阶段封锁协议保证没有脏数据。</code></strong> </p>
<p><strong>基本两阶段封锁协议可以保证冲突可串行化，但是无法保证数据可恢复性（因为假如事务A和事务B保持基本两阶段封锁协议，那么假如A要进行数据写入，会在写入之后立马放开X锁，那么事务B就有可能读取A的脏数据。假设B先提交，A再回滚，那么B提交的数据将不可恢复）。</strong></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031700235.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240603170020153" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031700235.png" /></a></p>
</blockquote>
<p><strong>Idempotent(幂等性)</strong>: An recovery algorithm is said to be idempotent if executing it several times gives the same result as executing it once.  </p>
<p>算法恢复多次的效果是一样的。<strong><code>（恢复过程中可能也发生 crash，重新恢复一次即可）</code></strong></p>
<h2 id="153-log-based-recovery">15.3 Log-Based Recovery<a class="headerlink" href="#153-log-based-recovery" title="Permanent link">&para;</a></h2>
<h3 id="1531-log-records">15.3.1 Log Records<a class="headerlink" href="#1531-log-records" title="Permanent link">&para;</a></h3>
<div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031343396.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031343396.png" width = 70%/></a> </div>

<p><strong>A log is kept on stable storage(稳定存储器).</strong>   </p>
<p>The log is a sequence of <strong>log records</strong>, and maintains a record of update activities on the database.</p>
<ul>
<li>When transaction <span class="arithmatex">\(Ti\)</span> starts, it registers itself by writing a <strong>“start”</strong> log record: <span class="arithmatex">\(&lt;T_i\  start&gt;\)</span>  </li>
</ul>
<p><strong>事务开始. <span class="arithmatex">\(Ti\)</span> 表示事务的 id.</strong> </p>
<ul>
<li>Before <span class="arithmatex">\(Ti\)</span> executes write(X), writing <strong>“update</strong>” log record <span class="arithmatex">\(&lt;T_i, X,  V_1,  V_2&gt;\)</span>   </li>
</ul>
<p><strong><code>事务把 X 数据项的值从 V1(old value) 改为 V2(new value).</code></strong>  </p>
<p><strong>这个就是恢复的基础. undo 得到 old value, redo 得到 new value.</strong>  </p>
<p><strong><code>Insert 就是 old 为空, Delete 就是 new 为空。</code></strong></p>
<ul>
<li>
<p>When <span class="arithmatex">\(Ti\)</span> finishes it last statement, writing <strong>“commit”</strong> log record: <span class="arithmatex">\(&lt;T_i\  commit&gt;\)</span> </p>
</li>
<li>
<p>When <span class="arithmatex">\(Ti\)</span>  complete rollback, writing <strong>“abort”</strong> log record: <span class="arithmatex">\(&lt;T_i\  abort&gt;\)</span> </p>
</li>
</ul>
<blockquote>
<p><strong><code>先记日志，能够实现事务执行顺序化（优化调度）</code></strong></p>
</blockquote>
<div class="admonition example">
<p class="admonition-title">Log Example</p>
</div>
<div align=center> <a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031818596.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031818596.png" width = 80%/></a> </div>

<p><strong>这里当执行到 T2 回滚的时候我们会进行恢复（绿色的行表示补偿日志）比如 T2 把 C 恢复为 500, T3 把 B 恢复为 300, 最后 T2 abort. (undo 操作也会记录到日志中)</strong>  </p>
<blockquote>
<p><strong><code>绿色部分是补偿日志，用于rollback的恢复</code></strong></p>
</blockquote>
<p>发生 crash 的时候 repeat history(undo 正常的操作也会重复), 随后得到并执行 undo list.(事务开始后先把事务放进去，如果提交或者回滚了就把事务移除) 只需要把 T4 undo.(假设故障前只执行到 15 行) </p>
<blockquote>
<p><strong><code>发生crash，先恢复现场，Repeating history，不管有没有做过，把所有的操作重新做一遍（这是没有问题的，原因在于执行update时，new value恒定，并不会得到新的数据库结果），将各个事务的每一个操作写入到undo list，遇到commit，再把该事务所有的操作去除即可。</code></strong></p>
<p><strong><code>第二个阶段是undo pass，例如T4重新将A变为100，并且记录补偿日志，做完了再写&lt;T4 abort&gt;.从数据库发生crash的地方，一直undo到&lt;T4,start&gt;。</code></strong></p>
</blockquote>
<h3 id="1532-write-ahead-logging">15.3.2 Write-Ahead Logging<a class="headerlink" href="#1532-write-ahead-logging" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong><code>先写日志原则</code></strong></p>
</blockquote>
<p>Before a data in main memory is output to the database, the log records pertaining to data must have been output to stable storage.  </p>
<p>在主存中的数据输出到数据库之前，必须先将与数据有关的日志记录输出到稳定存储器中。</p>
<blockquote>
<p><strong><code>Concurrency Control and Recover</code></strong></p>
<ul>
<li><strong>对于并发事务，所有的事务共享一个 disk buffer 和 log buffer</strong></li>
<li><strong>缓冲区块内能够包含一个或者多个事务更新的数据项</strong></li>
<li><strong>我们假定，如果事务 $Ti $修改了某个项，则在 $Ti $提交或中止之前，其他事务都不能修改同一个项。即未提交事务的更新对其他事务不可见，确保隔离性</strong></li>
<li><strong>可以使用X锁，一直到事务即将提交才解锁（严格两阶段封锁协议）</strong></li>
</ul>
<p><strong><code>Database Modification</code></strong></p>
<ul>
<li><strong><code>immediate-modification scheme(立即修改方案)</code></strong> 允许在事务提交之前对缓冲区或磁盘本身进行未提交事务的更新</li>
<li><strong>写入数据库项之前必须先写入更新日志记录</strong></li>
<li><strong><code>deferred-modification schema（延迟修改方案）</code></strong>仅在事务提交时对缓冲区/磁盘执行更新</li>
</ul>
</blockquote>
<h3 id="1533-transaction-commit">15.3.3 Transaction Commit<a class="headerlink" href="#1533-transaction-commit" title="Permanent link">&para;</a></h3>
<ul>
<li>A transaction is said to have committed when its <em>commit log record</em> is output to <em>stable storage</em>  </li>
</ul>
<p><strong><code>commit 日志经由log buffer写入到log file（stable storage）表示该事务已经完成提交</code></strong> </p>
<ul>
<li>all previous log records of the transaction must have been output already </li>
</ul>
<p><strong><code>commit是当前事务的最后一条，显然前面的log records已经写入到log file</code></strong></p>
<ul>
<li>Writes performed by a transaction may still be in the buffer when the transaction commits, and may be output later.    </li>
</ul>
<p><strong><code>但此时修改的数据项不一定已经写回到数据库里 。如果立刻将 block 写回磁盘可能引起大量 I/O 操作</code></strong></p>
<h3 id="1534-undo撤销-and-redo重做-operations">15.3.4 Undo(撤销) and Redo（重做） Operations<a class="headerlink" href="#1534-undo撤销-and-redo重做-operations" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031852611.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240603185220572" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031852611.png" /></a></p>
<p><strong><code>特别需要注意的就是执行undo时，需要写补偿日志，&lt;T,X,V&gt;,在完成undo之后，需要一条log record &lt;T abort&gt;</code></strong></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031902947.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240603190214912" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031902947.png" /></a></p>
<p><strong><code>一般是先全部做一遍，然后把有头无尾的undo即可</code></strong></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032010560.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240603201004521" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032010560.png" /></a></p>
<h3 id="1535-checkpoints">15.3.5 Checkpoints<a class="headerlink" href="#1535-checkpoints" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>刚刚repeating history的过程，是从日志的头部开始重演，一直重演到我们发生crush的地方。重演的操作太多，浪费太多的资源。</strong></p>
<p><strong>每隔一定的时间，或者每隔一定日志的量，就会设置一个检查点。检查点的作用是确认一下，检查点之前的所有数据和操作，都已经正确反映到数据库里面了。</strong></p>
</blockquote>
<p><strong>Redoing/undoing all transactions recorded in the log can be very slow.</strong>  </p>
<p><strong>Streamline recovery procedure by periodically performing checkpointing.</strong>  </p>
<p><strong><code>重演历史可能很长。checkpoint 是确认之前的操作都已经反映到数据库里去了，这样重演的时候就可以直接从 checkpoint 开始。</code></strong></p>
<ul>
<li>Output all log records currently residing in <strong>main memory onto stable storage</strong>.  </li>
</ul>
<p><strong>日志不是生成就往内存写，而是有一个日志缓冲区(stable storage)。</strong>  </p>
<ul>
<li>Output all modified buffer blocks to the disk.  </li>
</ul>
<p><strong>把所有修改过的内存块写回到磁盘中</strong></p>
<ul>
<li>Write a log record <span class="arithmatex">\(&lt;checkpoint\ L&gt;\)</span> onto stable storage where L is a list of all transactions active at the time of checkpoint.   </li>
</ul>
<p>写一个日志的标记（新的日志类型）. <strong>L 是当前正在工作的事务的表</strong>。（用来做 undo list 的初始化列表）</p>
<ul>
<li><strong>All updates are stopped while doing checkpointing!!!</strong></li>
</ul>
<p><strong><code>做 checkpoint 的时候其他活跃事务都要停下来.这时候就存在一个tradeoff，性能会收到影响。</code></strong></p>
<blockquote>
<p><strong>设置检查点时，有以下三个步骤：</strong></p>
<p><strong>1.</strong> <strong>将所有日志中的记录存储到稳定存储器中。</strong></p>
<p><strong>2.</strong> <strong>把所有修改过的内存块写回到磁盘中。</strong></p>
<p><strong>3.</strong> <strong>在日志文件中写入一条记录：<checkpoint L>。其中，L表示处于该checkpoint的时候，恰好正在活跃的事务。</strong></p>
<p><strong>Example "Log File with Checkpoint : Example"</strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328125.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328125.png" width = 80%/></a> </div></p>
<p><strong>重演历史从最近的 checkpoint 重演. {T2 T4} 作为 undo list 的初始化值。</strong>  </p>
<p><strong>Undo List的初始值就是checkpoint中保存的正在活跃的事务。</strong></p>
<p><strong>??? Example "Example of Recovery"</strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328066.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328066.png" width = 80%/></a> </div></p>
<p><strong>设置了checkpoint，活跃的事务的初始值是T0和T1。重演历史的时候，从这个checkpoint开始即可。在重演历史的过程中，发现T1 commit，T0 abort。但是T2 start且没有commit或abort。因此，最终我们得到的Undo List只有T2。</strong></p>
<p><strong>Undo</strong> <strong>到T2开始的地方，并且记录补偿日志即可。</strong></p>
</blockquote>
<p><strong><code>checkpoint 之间的间隔应该如何确定？  根据日志量。</code></strong></p>
<h3 id="1536-log--buffer--database-buffer">15.3.6 Log  Buffer &amp; Database Buffer<a class="headerlink" href="#1536-log--buffer--database-buffer" title="Permanent link">&para;</a></h3>
<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032019026.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032019026.png" width = 80%/></a> </div>

<p><strong><code>Log record buffering（日志记录缓冲）</code></strong>：日志记录缓冲在主内存中，而不是直接输出到稳定存储。当缓冲区中的日志记录块已满或执行日志强制操作时，日志记录将输出到稳定存储。</p>
<p><strong>执行日志强制通过强制所有日志记录（包括commit记录）进入稳定存储来提交事务。</strong></p>
<p>我们在把数据 buffer 中的块写到数据库时，要先把块对应的日志先写到日志文件（直接把日志全部刷写一遍）。  </p>
<p>事务提交之后有一个对日志的强制刷写。<strong><code>commit时，要求commit日志写入到log file，确保已经实现，并且database buffer中修改的block也写入到disk</code></strong></p>
<blockquote>
<p>缺点：会打断事务，事务集中，commit过多，checkpoint也过多,IO操作过多</p>
<p><strong><code>如果事务commit写到log buffer，还不算是commit，所以发生掉电故障，log buffer丢失也没有关系。事务提交只能是commit写入到log file</code></strong></p>
</blockquote>
<p>组提交：可以使用单个输出操作输出多个日志记录，从而降低 I/O 成本。</p>
<blockquote>
<p>**<code>Group commit</code>: several log records can be output using a single output operation, reducing the I/O cost. commit **</p>
<p><strong>可能在日志里等待一段时间, 等到 buffer 里有足够多的日志记录再写出去。</strong> </p>
<p><strong><code>如果事务commit写到log buffer，还不算是commit，所以发生掉电故障，log buffer丢失也没有关系。事务提交只能是commit写入到log file</code></strong></p>
</blockquote>
<ul>
<li>The recovery algorithm supports the <strong>no-force policy(非强制)</strong>: </li>
</ul>
<p><strong>i.e.</strong>, updated blocks need not be written to disk when transaction commits.  </p>
<p><strong>事务commit后，不要求内存中的数据立即写入到磁盘中。（较好的方式）</strong></p>
<ul>
<li>The recovery algorithm supports the <strong>steal policy(窃取策略)</strong>:</li>
</ul>
<p><strong>i.e.</strong>, blocks containing updates of uncommitted transactions can be written to disk, even before the transaction commits. </p>
<p><strong>即使在事务提交之前，也可以将包含未提交事务更新的块写入磁盘</strong></p>
<p><strong><code>事务提交之前脏数据能不能被写到磁盘里去？（同样地需要先把日志写出去）</code></strong></p>
<h3 id="1537-fuzzy-checkpointing">15.3.7 Fuzzy Checkpointing<a class="headerlink" href="#1537-fuzzy-checkpointing" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>Fuzzy 模糊</strong></p>
</blockquote>
<p><strong>做 checkpoint 的时候我们如果要求其他活跃事务都停下来，一次性把脏数据都刷写出去，吞吐率会忽高忽低，系统的可用性就比较差。</strong>  </p>
<blockquote>
<p><strong>Fuzzy Checkpoint</strong> <strong>：<code>做check point的时候，把内存中的脏页全部记下来，后面慢慢写回到磁盘去即可。此时不会造成数据库系统短暂的停顿</code></strong></p>
</blockquote>
<p><strong>check point设置之后，脏页慢慢写回到磁盘中去的过程中，当脏页全部写出后，该check point变为一个成功的check point。在硬盘上面，有一个指针last_checkpoint，指向最后一个成功的check point。Repeating history的时候，从最后一个成功的check point开始。</strong></p>
<ul>
<li>Temporarily stop all updates by transactions</li>
<li>Write a <span class="arithmatex">\(&lt;checkpoint\ L&gt;\)</span> log record and force log to stable storage</li>
<li>Note list M of modified buffer blocks</li>
<li>Now permit transactions to proceed with their actions</li>
<li>Output to disk all modified buffer blocks in list M</li>
</ul>
<div align=center><a class="glightbox" href="http://cdn.hobbitqia.cc/202306121916858.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202306121916858.png" width = 60%/></a> </div>

<h3 id="1538-failure-with-loss-of-nonvolatile-storage">15.3.8 Failure with Loss of Nonvolatile Storage<a class="headerlink" href="#1538-failure-with-loss-of-nonvolatile-storage" title="Permanent link">&para;</a></h3>
<div align=center><a class="glightbox" href="http://cdn.hobbitqia.cc/202306121918751.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202306121918751.png" width = 60%/></a> </div>

<p>要从磁盘故障中恢复，从最近的转储中恢复数据库。</p>
<p>查阅日志并重做转储后提交的所有事务</p>
<p>可以扩展以允许事务在转储期间处于活动状态；称为模糊转储或联机转储。类似于模糊检查点</p>
<h2 id="154-recovery-with-early-lock-release-and-logical-undo-operations">15.4 Recovery with Early Lock Release and Logical Undo Operations<a class="headerlink" href="#154-recovery-with-early-lock-release-and-logical-undo-operations" title="Permanent link">&para;</a></h2>
<h3 id="1541-logical-undo-logging">15.4.1 Logical Undo Logging<a class="headerlink" href="#1541-logical-undo-logging" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>之前，采取的是严格两阶段封锁协议（不读脏数据），即在一个事务提交之前，这个事务修改过的数据不会被其他事务读取或写入</strong></p>
<p><strong>现在，我们可以针对一般两阶段封锁协议（允许早放锁），提供数据恢复算法。一般两阶段封锁协议，支持一个事务还未提交的时候，其写入过的数据就可以被其他事务再次写入。</strong></p>
</blockquote>
<p>如果早放锁，后续恢复为 old value 可能没有意义。</p>
<p><strong>比如存款 100, 转入 100. 那么我们恢复为 100(物理撤销) 就没有意义。这个时候应该采用逻辑撤销，即如果 <code>a+=100</code>, 恢复时就应该 <code>a-=100</code>.</strong> </p>
<p><strong><code>逻辑undo是执行反操作，物理undo是执行恢复成原来的值。但是早放锁，意味着别人能够读取你最新写入的数据，会在此基础上发生更改，如果恢复成原值，意味着你忽略了更改，这显然是不对的。所以我们执行逻辑undo，执行反操作</code></strong></p>
<div align=center><a class="glightbox" href="http://cdn.hobbitqia.cc/202306121925529.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202306121925529.png" width = 80%/></a> </div>

<p>如 B+ 树的插入和删除操作。  </p>
<p>我们需要对逻辑操作记日志。</p>
<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032040468.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032040468.png" width = 80%/></a> </div>

<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032041910.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032041910.png" width = 80%/></a> </div>

<p><strong><code>和之前的transaction commit/abort类似，对应的存在operation-begin和operation-end。如果operation-end存在，还需要包含logic undo U，记录如何恢复</code></strong></p>
<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032046497.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032046497.png" width = 80%/></a> </div>

<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032046446.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032046446.png" width = 80%/></a> </div>

<blockquote>
<p><strong><code>!!! Example "Transaction Rollback with Logical Undo"</code></strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328090.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328090.png" width = 100%/></a> </div></p>
<p><strong>例如，对C进行更改的时候，做了一个+（-100）的操作。这时候，要记录一个日志：</strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450052.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450052.png" width = 40%/></a> </div></p>
<p><strong>operation-end</strong> <strong>后面跟的(C, +100)表示，要恢复这个操作，需要给C加100。（要撤销操作应怎么做）。</strong></p>
<p><strong>这样记录的原因是：假如给C减去100的操作没有完成，即</strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450054.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450054.png" width = 40%/></a> </div></p>
<p><strong>还未记录的时候，就发生了crush。那么，此时就要对C进行物理Undo，直接把C由600恢复为旧数据700即可。</strong></p>
<p><strong>在这句话后面：</strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450050.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450050.png" width = 40%/></a> </div></p>
<hr />
<p><strong>T0</strong> <strong>事务决定abort。</strong></p>
<p><strong>此时，对T0事务进行Undo操作，并记录补偿日志如下：</strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450044.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031450044.png" width = 40%/></a> </div></p>
<p><strong>C</strong> <strong>加上100，而不是恢复为700。</strong></p>
</blockquote>
<p>需要把每个操作的日志项记录下来（开始和结束）. C 表示自加操作。这里在 end 时会记录 logical undo 的操作(减法撤销对应加法)  </p>
<p><strong><code>注意我们是在 end 的时候记录逻辑撤销的方法，如果这个操作还没有结束，那么我们只能物理撤销。</code></strong>  </p>
<p>这里我们早放锁了，没有遵循严格两阶段放锁协议。在 T0 还没有提交的时候 T1 就对数据进行了修改.  </p>
<p>恢复中做的是物理撤销(old+new), begin/end 这些日志就不需要记录了。</p>
<blockquote>
<p><strong><code>!!! Example "Failure Recovery with Logical Undo"</code></strong></p>
<p><div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328131.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328131.png" width = 80%/></a> </div></p>
<p><strong>发生crush之后，先从check point开始向下重现历史，得到Undo List：T1、T2。</strong></p>
<p><strong>然后，从crush的地方，Undo到T1事务开始的地方。由于crush的地方操作O5还没有完成，因此对C数据进行恢复的时候，进行物理Undo就可以。</strong></p>
<p><strong>因此，先做物理Undo，将C设置回400，然后补偿日志中记录<T2 abort>；再回滚操作O4，对C自增300，因此此时C变为700，也要记录在补偿日志中；然后在补偿日志中记录<T1, O4, operation-abort>。</strong></p>
<p><strong>最后，将B设置回2050，并记录在补偿日志中。最后，记录<T1 abort>。</strong></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031518061.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031518061.png" alt="image-20240603151845861" style="zoom:33%;" /></a></p>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031519837.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031519837.png" alt="image-20240603151903621" style="zoom:33%;" /></a></p>
<p><strong><code>注意第五题，redo之后的D的值为97，恢复时执行+1操作，得到的结果为98，而不是99</code></strong></p>
<p><strong><code>注意第六题，增加&lt;T2,D,97,98&gt;; &lt;T2 , operation-abort&gt;, &lt;T2,B,20&gt;, &lt;T2 abort&gt;</code></strong></p>
</blockquote>
<h2 id="155-aries-recovery-algorithm">15.5 ARIES Recovery Algorithm<a class="headerlink" href="#155-aries-recovery-algorithm" title="Permanent link">&para;</a></h2>
<blockquote>
<p><strong>ARIES is a state of the art recovery method.</strong> </p>
</blockquote>
<p><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032100022.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20240603210047986" src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032100022.png" /></a></p>
<h3 id="1551-aries-data-structures">15.5.1 ARIES Data Structures<a class="headerlink" href="#1551-aries-data-structures" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Log sequence number (LSN)</strong> identifies each log record  </p>
<ul>
<li>Must be sequentially increasing <strong>顺序递增</strong></li>
</ul>
</li>
<li>
<p><strong>Page LSN</strong>  </p>
</li>
<li>
<p><strong>每一个内存页中，都有一个Page LSN，用来标记这个页最近反映的是哪一个日志项修改的结果。</strong></p>
</li>
<li>
<p><strong>Log records of several different types</strong></p>
</li>
<li>
<p><strong>Dirty page table</strong>  </p>
</li>
<li><strong>脏页表记录在日志当中，在设定CheckPoint的时候，当前的内存中脏页的表，需要记录下来。</strong></li>
<li><strong>每一个脏页表中的页，都有一个Page LSN，反映当前页是哪一个日志项最后修改了它；</strong></li>
</ul>
<h4 id="page-lsn">Page LSN<a class="headerlink" href="#page-lsn" title="Permanent link">&para;</a></h4>
<p><strong>每一个内存页中，都有一个Page LSN，用来标记这个页最近反映的是哪一个日志项修改的结果。</strong></p>
<blockquote>
<p><strong>如果需要修改页面，需要以下步骤：</strong></p>
</blockquote>
<ul>
<li>X-latch the page, and write the log record </li>
<li>Update the page</li>
<li>Record the LSN of the log record in Page LSN <strong><code>在 Page LSN上记录log record的LSN</code></strong></li>
<li>Unlock page</li>
</ul>
<p><strong><code>Page LSN 在恢复期间用于防止重复重做，从而确保幂等性</code></strong></p>
<h4 id="log-record">Log Record<a class="headerlink" href="#log-record" title="Permanent link">&para;</a></h4>
<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032106009.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406032106009.png" alt="image-20240603210600969" width = 80%/></a> </div>

<ul>
<li>
<p>LSN表示<strong>该条日志的编号</strong>；</p>
</li>
<li>
<p><code>TransID</code>表示<strong>该条日志对应的事务是什么</strong>。</p>
</li>
<li>
<p><code>UndoNextLSN</code>表示，如果要Undo这一个事务，<strong>下一个需要Undo的日志项</strong>是什么<strong>。把所有相同事务的Undo项串起来，方便Undo的加速。</strong></p>
</li>
</ul>
<p><strong><code>例如undo某一个特定的transaction时，把该transaction的操作串行起来，一次性undo</code></strong></p>
<ul>
<li><code>RedoInfo</code>表示重复历史的相关信息。</li>
</ul>
<blockquote>
<p><strong>上面，日志项一项一项地记下来，4’为4 Undo的结果，也就是4的补偿日志。4’指向3表示，记录完补偿日志4’，下一个需要Undo的日志项是3。</strong></p>
</blockquote>
<h4 id="dirty-page-table">Dirty Page Table<a class="headerlink" href="#dirty-page-table" title="Permanent link">&para;</a></h4>
<blockquote>
<p><strong><code>Dirty Page Table: List of pages in the buffer that have been updated</code></strong></p>
<p><strong>用于表示buffer中已经被修改的数据页</strong></p>
</blockquote>
<ul>
<li>
<p><code>PageLSN</code> of the page</p>
</li>
<li>
<p><code>RecLSN</code> is an LSN such that log records before this LSN have already been applied to the page version on disk</p>
</li>
</ul>
<p><strong>每一个页还会记录一个Rec LSN，反映这个数据页到达了磁盘之前，是哪一个日志项最后修改了它。</strong></p>
<div class="admonition example">
<p class="admonition-title">ARIES Data Structures</p>
</div>
<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328179.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328179.png" width = 80%/></a> </div>

<p><strong><code>stable data表示正确反映到数据库中的内容，对于ID=7200的页，最后更改这一页的日志的编号为4404.但是在database buffer中，ID=7200的页，最后更改这一页的日志的编号为7565，这表明这一页既在内存中，又被日志更改。</code></strong></p>
<p><strong><code>stable log（PrevLSN and UndoNextLSN fields not shown）中，对于7565（LSN）这条日志记录，表示对于事务T143，将编号为7200页的第二个数据，由60改为80.对于7563这条日志记录，表示对于事务T145，事务begin</code></strong></p>
<p><strong><code>日志记录，有的在Stable Storage中，有的在内存中。例如，对于编号为4894的数据页，数据内存中显示最后对这一数据的更改是编号7567的日志，对应log buffer中的7567日志项</code></strong></p>
<p><strong><code>脏页表：例如，记录7200 7565 7565表示，缓冲区中page_ID为7200的页是脏的，最新修改它的是7565这个日志，并且从7565这条日志之后的更改，都没有反映到数据库系统之中。</code></strong></p>
<p><strong><code>又例如，4894 7567 7564表示，缓冲区中page_ID为4894的页是脏的，最新修改它的是7567这个日志，但是，从7564这个日志开始，更改就没有反映到数据库中了。</code>看log buffer，7567日志项还没有写入到stable log</strong></p>
<blockquote>
<p><strong><code>这边特别注意Page LSN和Rec LSN的不同之处</code></strong></p>
<p><strong>可以理解为：Rec LSN记录的是磁盘中，最后一次对该数据产生更改的日志项编号；</strong></p>
<p><strong>Page LSN</strong> <strong>记录的是日志内存中，最后一次对该数据产生更改的日志项编号。</strong></p>
<p><strong><code>一个是磁盘中，一个是日志内存中，日志内存还没有写入到stable log中</code></strong></p>
</blockquote>
<ul>
<li>
<p>Checkpoint log record</p>
<ul>
<li>
<p>Contains: </p>
<ul>
<li>
<p>Dirty Page Table and list of active transactions  </p>
</li>
<li>
<p>For each active transaction, Last LSN, the LSN of the last log record written by the transaction  </p>
</li>
</ul>
<p>要记最近的事务项（从哪里开始恢复）</p>
<blockquote>
<p><strong><code>做check point时，需要记录以下内容：1. 当前活动事务表 2. 脏页表 3. 对于每一个当前活动的事务，需要记录修改该事务最近的一个日志项Last LSN</code></strong></p>
</blockquote>
</li>
<li>
<p>Fixed position on disk notes LSN of last completed checkpoint log record</p>
</li>
</ul>
</li>
<li>
<p>Dirty pages are not written out at checkpoint time  </p>
</li>
</ul>
<p>Instead, they are flushed out continuously, in the background  </p>
<p>脏页不会在 check 的时候写出去。</p>
<ul>
<li>Checkpoint is thus very low overhead
can be done frequently</li>
</ul>
<h3 id="1552-aries-recovery-algorithm">15.5.2 ARIES Recovery Algorithm<a class="headerlink" href="#1552-aries-recovery-algorithm" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Analysis pass  </p>
<ul>
<li>Which transactions to undo (undo-list)  </li>
<li>Which pages were dirty (disk version not up to date) at time of crash<br />
得到 dirty page table. </li>
<li>RedoLSN: LSN from which redo should start<br />
真正的 redo 要从哪里开始(RecLSN 的最小值就是 redo 的起点)</li>
</ul>
<blockquote>
<p><strong><code>1. 得到undo list，哪些事务需要撤销undo</code></strong></p>
<p><strong><code>2. 得到dirty page table。也就是当crash发生时，发生update但是么有写入到数据库的脏页。</code>check point处得到的dirty page table还不是最新，因为距离crash发生还执行新的update，所以我们需要从check point开始向下更新</strong></p>
<p><strong><code>3. 得到Redo LSN，即真正的Redo操作，应当从哪里开始（Repeating history的起始地点）。在ARIES算法中，Redo可能发生在check point之前，不一定在check point开始。Redo的起点是所有Rec LSN的最小值，这是因为Rec LSN表示是磁盘中最后一次对该数据产生更改的日志编号，Rec LSN之前的日志项，都已经正确地反应在数据库中。所以我们从Rec LSN的最小值开始执行repeat history</code></strong></p>
</blockquote>
</li>
<li>
<p>Redo pass  </p>
</li>
</ul>
<p><strong>RecLSN</strong> and <strong>PageLSNs</strong> are used to avoid redoing actions already reflected on page.  </p>
<p>用来优化，有些日志不用 redo(没有意义)</p>
<p><strong>从所有脏页表中Rec LSN中最小的那个日志项（Redo LSN）开始，repeat history。</strong></p>
<ul>
<li>Undo pass  </li>
</ul>
<p><strong>和前面的原理相同，利用Undo List，直到Undo 到Undo List中所有事务到达开始（begin）的地方。</strong></p>
<div class="admonition example">
<p class="admonition-title">Example</p>
</div>
<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328900.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328900.png" width = 100%/></a> </div>
<div align=center><a class="glightbox" href="http://cdn.hobbitqia.cc/202306122025645.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="http://cdn.hobbitqia.cc/202306122025645.png" width = 100%/></a> </div>

<div class="highlight"><pre><span></span><code>crash 之后，得到上页的 Dirty Page Table 和 Active TXN Table 以及磁盘里的日志。
</code></pre></div>
<div class="admonition example">
<p class="admonition-title">Example</p>
</div>
<div align=center><a class="glightbox" href="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328094.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img src="https://zn-typora-image.oss-cn-hangzhou.aliyuncs.com/typora_image/202406031328094.png" width = 60%/></a> </div>

<p>check point中记录了什么？</p>
<ol>
<li>活动事务表：T145，并且最后对事务T145进行修改的是Last LSN是7567</li>
<li>脏页表：</li>
<li>最新的对数据页4894进行修改的日志项时7567，正确反应到磁盘中的最后一个对4894页进行修改的日志项时7564</li>
<li>
<p><strong>最新对页号7200的页产生更改的是日志项7565，而正确反映到磁盘中的最后一个对7200页产生更改的日志项是7565；</strong></p>
</li>
<li>
<p>Analysis：从最近的check point开始，分析到发生crash的地方，这一过程中需要更新脏页表，并得到Undo List，以及Redo LSN</p>
</li>
</ol>
<p><strong><code>这是因为check point处的脏页表不是最新的发生在crash处的脏页表，需要先继续执行</code></strong></p>
<p><strong>例如，首先碰到T146 begin, 因此在活动事务表中记录一项T146；然后碰到T146的修改操作，然后在脏页表中记录一项T146。 2390 7570 ？</strong></p>
<ol>
<li>Redo 阶段</li>
</ol>
<p><strong><code>Redo的起点，是更新过后的脏页表张，Rec LSN的最小值</code></strong></p>
<ol>
<li>Undo 阶段</li>
</ol>
<p>Undo的结束点，<strong>在Undo List中开始最早的事务的开始点（此处undo的事务是T145，到begin位置）。并且对于每一事务的undo，由于各事务的日志项存在undonextLSN，所以undo的时候不是一条一条的undo，而是跳跃性的。</strong></p>
<blockquote>
<p><strong>总结来说：</strong>在生成Check Point的时候，Check Point中会记录<strong>当前活动事务表，和脏页表</strong></p>
<p>在<strong>当前活动事务表</strong>中，记录了<strong>活动事务</strong>，以及<strong>最后一次对该事务的更改，处于哪一个日志项</strong>当中。在<strong>脏页表</strong>中，记录了<strong>页号</strong>，以及Page LSN（<strong>表示这个页最后被更改，处于哪一个日志项）</strong>、Rec LSN（<strong>表示这个页最后被存储，处于哪一个日志项）。</strong></p>
<p><strong>在数据恢复的过程中，第一阶段是分析阶段，从上一个有效的检查点开始，一直分析到crush发生的地方。在分析的过程中，不断更新当前活动事务表，以及脏页表。</strong></p>
<ul>
<li><strong>假如遇到一个事务开始了，那么就在当前活动事务表中增添一项，遇到一个事务commit或者abort了，就在当前活动事务表中减少一项；</strong></li>
<li><strong>假如遇到某个日志项对某一页产生了更改，就要更新脏页表中的Page LSN，</strong></li>
<li><strong>假如遇到某个日志项对脏页表中没有的页号的页产生了更改，就要在脏页表中添加一项，Page LSN和Rec LSN设置为当前日志项。</strong></li>
</ul>
<p><strong>最后，当分析到crash的地方，我们就得到了一个更新后的活动事务表，作为Undo List，并且得到了一个更新后的脏页表。</strong></p>
<p><strong>第二阶段是Redo阶段，Redo阶段的起点是更新后的脏页表中，Rec LSN的最小值的日志项。一直Redo到crush的地方。</strong></p>
<p><strong>第三阶段是Undo阶段，Undo阶段的起点是活动事务表中，记录的Last LSN中的最大值，从Last LSN开始，对活动事务表中的每一个事务向前进行串在一起的指针遍历，直到Undo到各个事务都经过了&lt; start&gt;。</strong></p>
</blockquote>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy 2024 rescuerz
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.indexes", "navigation.expand", "navigation.top", "search.highlight", "search.share", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
        <script src="../../supports/js/xlink.js"></script>
      
        <script src="../../supports/js/katex.js"></script>
      
        <script src="https://jsd.cdn.zzko.cn/npm/katex@0.16.4/dist/katex.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>